{{Infobox version
|title=Minecraft 21w39a
|image=21w39a.jpg
|image2=Java Edition 21w39a.png
|edition=Java
|type=Snapshot
|date=September 29, 2021
|jsonhash=8f3f2f74782ba9c7e2143267fedad61d093be3b9
|clienthash=2b2b97d9ca6d50669096016f0da959879afe3203
|clientmap=bae4d018259bbfc2d74153c1347da160adb95daf
|serverhash=2b40ef4bf57b2040f7d9affb48c0131b228f954f
|servermap=5f6f035a96f6d68bb79adbc0c001e0e332383181
|parent=1.18
|prevparent=1.17.1
|prev=21w38a
|next=21w40a
|nextparent=1.18.1
}}<onlyinclude>

'''21w39a''' is the third [[snapshot]] for [[Java Edition 1.18]], released on September 29, 2021,<ref>{{snap|21w39a|September 29, 2021}}</ref> which adds new advancements and fixes bugs.

Starting from this snapshot, players can open old worlds again. This does not only mean it is the first version which makes it possible to convert old worlds with lower limit Y=0 to the new Y=-64, but it means also that high caution is needed and backups are recommended when converting important old worlds, because the old chunks do yet not generate anything under their bedrock level: from -64 to -1 it is just void, only the new chunks get the new deep generation.

== Additions ==
=== Gameplay ===
'''[[Advancement]]s'''
* Added four new advancements:
** Caves & Cliffs
*** Fall from the top to the bottom of the Overworld
** Feels like home
*** Ride a [[strider]] on lava for 50 blocks in the Overworld
** Star Trader
*** Trade with a [[villager]] at the build height limit
** Sound of Music
*** Play music with a [[jukebox]] in a [[meadow]] biome
* Added new advancement triggers.
** <code>fall_from_height</code>
*** Triggered when a player lands after falling.
** <code>ride_entity_in_lava</code>
*** Triggered for every tick when player rides in lava.

=== General ===
'''[[Loot table]]s'''
* Added new loot table function <code>set_potion</code>, to set <code>Potion</code> tag on any item.
** Has following parameters:
*** <code>id</code>: Potion ID

== Changes ==
=== Mobs ===
'''[[Drowned]]'''
* Now can spawn in aquifers inside dripstone caves.

'''[[Zombie]]'''
* No longer spawns in dripstone caves.

=== World generation ===
'''[[Lofty peaks]], [[snowcapped peaks]] and [[stony peaks]]'''
* Its small mountains are more jagged now.

'''[[Meadow]]'''
* Trees in meadows now always contain a [[bee nest]].

=== Gameplay ===
'''[[Advancement]]s'''
* "Light as a Rabbit" now has "Sweet Dreams" as its parent instead of "Adventure".

=== General ===
'''[[Buried treasure]]'''
* Chests can now contain Water Breathing [[potion]]s.

'''[[Chunk format]]'''
* Paths for the block and biome data have changed:
** <code>Level.Sections[].BlockStates</code> is now <code>Level.Sections[].block_states.data</code>.
** <code>Level.Sections[].Palette</code> is now <code>Level.Sections[].block_states.palette</code>.
** Chunk’s <code>Level.Biomes</code> are now paletted and live in a similar container structure in <code>Level.Sections[].biomes.palette</code> and <code>Level.Sections[].biomes.data</code>.
* Chunk’s <code>Level.CarvingMasks[]</code> is now <code>long[]</code> instead of <code>byte[]</code>.

'''[[Effect]]s'''
* Redesigned how effects look in the inventory screen.
** Can display while recipe book is showing.
** The list of effects are now shown to the right of the player's inventory, instead of the left side.
** When the inventory effects list is visible, it is hidden from the game view to reduce screen clutter.
** There are now two modes of seeing the effect list: compact and classic.
*** Classic is the pre-existing list of effects, one after another.
*** Compact is a single icon for each effect, suitable for small screen estate.
*** The game automatically switches between the two looks to suit the available screen estate.

'''[[Options]]'''
* Changed default brightness to 50.

'''[[Resource pack]]s'''
* Resource pack version number is now 8, as the following has been changed:
** {{mono|[[inventory.png]]}} now contains an extra sprite for a thin-layout version of the effect list in the inventory.

'''[[Server jar]]'''
* <code>server.jar</code> now bundles individual libraries instead of merging all the files into single archive.
** This change is meant to solve certain problems related to Java modules.
* On startup, <code>server.jar</code> unpacks libraries into a directory configured by <code>bundlerRepoDir</code> (default: working directory).
** To run different main class than server, use <code>bundlerMainClass</code> property.

== Fixes ==
{{fixes|fixedin=21w39a|otherissuescount=1
|;old
|116359|Status effects aren't displayed in inventory when recipe book is open.
|129485|Certain biome specific plant distribution is completely based on chunks, causing patchy biome generation.
|145376|Bamboo could generate underground when generating in non-bamboo jungles.
|149822|Bottom border on status effect displays in the inventory is missing.
|193348|Status effect bars shift the player's inventory in creative mode.
|196723|Potion effects obtained in creative mode while in inventory do not show up until reopening inventory.
|214894|Bamboo generates in caves under jungles.
|214959|Sugar cane generated in cave.
|218167|Chatting causes lag to occur.
|;dev
|236755|"Feature Placement" crash: <code>java.lang.IndexOutOfBoundsException</code>: Index 0 out of bounds for length 0.
|236903|Naturally generated cave vines have an age between 17-25.
|;previous
|237464|Packet sent event is recorded as packet received event.
|237505|Certain Biome Builder debug values do not change.
}}
'''Other'''
* Removed generic snapshot tooltips from incompatible worlds (except for worlds created in experimental snapshots).</onlyinclude>

== Videos ==
{{Slicedlime|bcdT3B5W7ks|L3EDJCA1kPI}}

== References ==
{{Reflist}}

== Navigation ==
{{Navbox Java Edition versions|1.1x}}

[[de:21w39a]]
[[es:Java Edition 21w39a]]
[[fr:Édition Java 21w39a]]
[[it:Java Edition 21w39a]]
[[ja:Java Edition 21w39a]]
[[ko:Java Edition 21w39a]]
[[pt:Edição Java 21w39a]]
[[ru:21w39a (Java Edition)]]
[[th:รุ่น Java 21w39a]]
[[zh:Java版21w39a]]